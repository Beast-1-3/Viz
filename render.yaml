services:
  # Backend Service (Free Tier)
  - type: web
    name: cloudconnect-backend
    runtime: docker
    plan: free # Explicitly set to free
    dockerContext: ./backend
    dockerfilePath: ./backend/Dockerfile
    envVars:
      - key: MONGODB_URI
        sync: false
      - key: PORT
        value: 5001
    # Removed 'disk' section to stay on Render's Free tier

  # Frontend Service (Free Tier)
  - type: web
    name: cloudconnect-frontend
    runtime: docker
    plan: free # Explicitly set to free
    dockerContext: ./frontend
    dockerfilePath: ./frontend/Dockerfile
    envVars:
      - key: VITE_API_BASE
        fromService:
          type: web
          name: cloudconnect-backend
          property: host
